<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WHACK 2025</title>
  <link rel="icon" href="../images/whaleicon.png" type="image/png">
  <!-- Preload critical assets to improve LCP and responsiveness -->
  <link rel="preload" href="../font/MinecraftRegular.otf" as="font" type="font/otf" crossorigin>
  <link rel="preload" href="../images/title.png" as="image" fetchpriority="high">
  <link rel="preload" href="../images/shadow.png" as="image" fetchpriority="high">
  <style>
    #loader-wrapper {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: #222;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }

    .loader {
      width: 60px;
      aspect-ratio: 1;
      background:
        linear-gradient(90deg, #ffffff 50%, #2758e2 0) top/100% 50% no-repeat,
        linear-gradient(90deg, #3abef9 50%, #fb6222 0);
      -webkit-mask: linear-gradient(#000 0 0) 0 0/50% 50% no-repeat;
      mask: linear-gradient(#000 0 0) 0 0/50% 50% no-repeat;
      animation: l18 2s infinite;
    }

    @keyframes l18 {
      0%   { -webkit-mask-position: 0 0 }
      25%  { -webkit-mask-position: 100% 0 }
      50%  { -webkit-mask-position: 100% 100% }
      75%  { -webkit-mask-position: 0 100% }
      100% { -webkit-mask-position: 0 0 }
    }

    @font-face {
      font-family: 'MinecraftRegular';
      src: url('../font/MinecraftRegular.otf') format('opentype');
      font-display: swap; /* allow text to render immediately while font loads */
    }

    .minecraft-text {
      font-family: 'MinecraftRegular', monospace;
      font-size: 30px;
      width: 50%;
      height: auto;
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #ffffff;
      z-index: 10;
      pointer-events: none;
    }

    html, body {
      height: 100%;
      margin: 0;
      scroll-behavior: smooth;
      overflow: hidden;
    }

    .scroll-container {
      height: 100vh;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .page {
      height: 100vh;
      scroll-snap-align: start;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
      justify-content: center;
      align-items: center;
    }

    .background {
      position: absolute;
      width: 101vw;
      height: 101vh;
      top: -5px;
      left: -5px;
      background: url("../images/sky.gif") center/cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: -2;
      will-change: background-position;
    }

    .wave, .bottom-img, .beneath-img {
      position: absolute;
      bottom: -75px;
      left: -10vw;
      width: 120vw;
      height: 120vh;
      object-fit: cover;
      pointer-events: none;
      transform: translateX(-50%);
      will-change: transform;
      z-index: -1;
    }

    #title {
      position: absolute;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: opacity 0.4s ease, transform 0.4s ease;
      pointer-events: none;
    }

    button {
      background: none;
      border: 3px solid;
      font: inherit;
      line-height: 1.5;
      margin: 0.5em;
      padding: 0.7em 2.5em;
      color: var(--color);
      transition: 0.25s;
      position: absolute;
      top: 80%;
      left: 50%;
      transform: translateX(-50%);
      transform-origin: center;
      box-sizing: border-box;
      z-index: 20;
    }

    button:hover,
    button:focus {
      border-color: var(--hover);
      color: #fff;
    }

    /* Style anchors inside .buttons to look and act like the original button element */
    .buttons a {
      background: none;
      border: 3px solid;
      font: inherit;
      line-height: 1.5;
      margin: 0.5em;
      padding: 0.3em 2em;
      color: var(--color);
      transition: 0.25s;
      position: absolute;
      top: 80%;
      left: 50%;
      transform: translateX(-50%);
      transform-origin: center;
      box-sizing: border-box;
      z-index: 20;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      font-family: 'MinecraftRegular', monospace;
      font-size: 1.9em;
    }

    .buttons a:hover,
    .buttons a:focus {
      border-color: var(--hover);
      color: #fff;
      outline: none;
    }

    .deadline-label {
      position: absolute;
      right: 2vw;
      bottom: 2vh;
      font-size: smaller;
      color: #fff;
      font-family: 'MinecraftRegular', monospace;
      font-size: 1em;
      z-index: 25;
      pointer-events: none;
      text-align: right;
      white-space: nowrap;
    }

    .offset {  
      --color: #fb6222;
      --hover: #fb6222; /* hue-shifted version of the base color */

      box-shadow: 
        0.3em 0.3em 0 0 var(--color),
        inset 0.3em 0.3em 0 0 var(--color);

    }
    .offset:hover,
    .offset:focus {
      box-shadow: 
        0 0 0 0 var(--hover),
        inset 6em 3.5em 0 0 var(--hover);
    }

    #container {
      position: relative;
      perspective: 800px;
      justify-content: center;
      align-items: center;
      display: inline-block;
      max-width: 90vw;
      max-height: 70vh;
      z-index: 10;
      width: 60vw;
      min-width: 220px;
    }

    .img-layer {
      position: absolute;
      width: 100%;
      max-width: 100vw;
      height: auto;
      transform-origin: center;
      will-change: transform;
    }

    #shadowImg { z-index: 0; }
    #mainImg { z-index: 1; position: relative; }

    .bottom-images, .beneath-images {
      position: absolute;
      width: 100vw;
      height: 100vh;
      left: 0;
      top: 0;
      pointer-events: none;
      z-index: 0;
    }

    @media (max-width: 700px) {
      #container { width: 85vw; max-width: 60vh; }
    }

    @media (max-width: 450px) {
      #container { width: 98vw; max-width: 40vh; }
    }

    #loader-gif {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: transparent;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s;
    }

    .page6-buttons a {
      background: none;
      border: 3px solid;
      color: var(--color, #fb6222);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      transition: 0.25s;
      -webkit-font-smoothing: antialiased;
      cursor: pointer;
    }
    .page6-buttons a:hover,
    .page6-buttons a:focus {
      border-color: var(--hover, #fb6222);
      color: #fff;
      outline: none;
    }

    .page6-panel {
      position: absolute;
      left: 55%;
      top: 50%;
      transform: translateY(-50%) translateX(24px);
      opacity: 0;
      transition: transform 360ms cubic-bezier(.2,.8,.2,1), opacity 360ms ease;
      color: #fff;
      font-size: 1.5em;
      font-family: 'MinecraftRegular', monospace;
      z-index: 40;
      max-width: 33vw;
      min-width: 200px;
      background: transparent;
      text-align: left;
      pointer-events: none;
    }
    .page6-panel.show {
      transform: translateY(-50%) translateX(0);
      opacity: 1;
      pointer-events: auto;
    }
    /* Responsive fallback: panels full width on narrow screens */
    @media (max-width: 700px) {
      .page6-panel { left: 50%; transform: translate(-50%, 16px); top: auto; bottom: 8vh; max-width: 90vw; }
      .page6-panel.show { transform: translate(-50%, 0); }
    }
  
    /* --- Panel card and non-blocking scroll (injected) --- */
    .page6-panel .card {
      background: transparent;
      backdrop-filter: blur(6px);
      border: transparent;
      border-radius: 10px;
      padding: 1rem 1.1rem;
      line-height: 1.45;
    }
    .page6-panel {
      overflow: visible;
      touch-action: pan-y;
      -webkit-overflow-scrolling: auto;
    }
    /* --- end injected --- */
    /* --- Track Panels (Page 3) --- */
    .track-panels {
      display:grid;
      grid-auto-flow:row;
      grid-template-rows:var(--row-1,1fr) var(--row-2,1fr);
      inline-size:min(55vw,450px);
      block-size:90vh;
      border:none;
      gap:var(--size-3,1rem);
      border-radius:var(--radius-3,1.5rem);
      overflow:hidden;
      position:absolute;
      top:50%;
      left:25%;
      transform:translate(-50%,-50%);
      transition:grid-template-rows 1.8s var(--ease-spring-5,cubic-bezier(.25,.8,.25,1));
    }

    .track-panels:has(label:nth-child(1) > input:checked){--row-1:4fr;--row-2:2fr;}
    .track-panels:has(label:nth-child(2) > input:checked){--row-1:2fr;--row-2:4fr;}

    .track-panels label{position:relative;cursor:pointer;display:block;overflow:hidden;border-radius:1.5rem;}
    .track-panels label>input{opacity:0;position:absolute;}

    .track-panels article{position:relative;width:100%;height:100%;border-radius:3em;overflow:hidden;}
    .track-panels .assets{position:absolute;inset:0;overflow:hidden;}
    .track-panels .assets>img{
      position:absolute;top:0;left:50%;translate:-50% 0;width:660px;height:100%;
      object-fit:cover;object-position:center 43%;user-select:none;pointer-events:none;
    }
    .track-panels .assets>img:first-of-type{
      width:900px;height:110%;filter:saturate(1.5) brightness(0.9);
      object-position:calc(-50% + (var(--x)*30px)) calc(43% + (var(--y)*-20px));
      transition:width .8s ease,height .8s ease;
    }
    .track-panels .assets>img:last-of-type{
      width:90%;height:90%;object-position:calc(-50% + (var(--x)*40px)) calc(43% + (var(--y)*-40px));
    }
    .track-panels .assets h3{
      position:absolute;left:50%;top:7%;margin:0;font-size:5rem;
      translate:calc(-50% + (var(--x)*-30px)) calc(var(--y)*-20px);
      text-transform:uppercase;color:#fff;
    }
    .track-panels .content{
      min-height:32%;position:absolute;bottom:0;width:100%;color:#fff;
      display:grid;place-items:center;align-content:center;gap:0;
      padding-bottom:0.5rem;z-index:2;
      transition:opacity 0.6s ease,transform 0.8s ease;
    }
    .track-panels .content p{
      font-family:'MinecraftRegular',monospace;
      font-size:clamp(1.5rem,2vw + 1rem,2.5rem);line-height: 0rem;
    }
    .track-panels .content p:last-of-type{opacity:.9;font-size:clamp(1.2rem,1.5vw + .8rem,1.8rem);}

    .track-panels label:not(:has(input:checked)) article{pointer-events:none;}
    .track-panels label:not(:has(input:checked)) .assets h3{
      top:50%;left:50%;translate:-50% -50%;transform:none;
    }
    .track-panels label:not(:has(input:checked)) .assets img:first-of-type{object-position:center center;}
    .track-panels label:not(:has(input:checked)) .assets img:nth-of-type(2),
    .track-panels label:not(:has(input:checked)) .content{
      opacity:0;pointer-events:none;transform:translateY(100%);
    }
    .track-panels label:has(input:checked) .assets img:nth-of-type(2),
    .track-panels label:has(input:checked) .content{
      opacity:1;transform:translateY(0);pointer-events:auto;
    }

    @font-face {
      font-family: pixles;
      src: url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/217233/04B_03__.TTF);
    }
    .bookmark-container {
      position: fixed;
      bottom: 20px;
      left: 0;
      display: flex;
      flex-direction: column;
      gap: 20px;
      z-index: 1000;
    }
    :root {
      --bookmarkBase: #fb6222;
      --pixelBorderColor: #c24712;
      --pixelHighlightColor: #ff8049;
      --pixelShadowColor: rgba(0, 0, 0, 0.216);
      --pixelWidth: 3px;
      --pixelWidthAlt: -3px;
    }
    .bookmark {
      position: relative;
      display: flex;
      align-items: center;
      white-space: nowrap;
      cursor: pointer;
      padding: 8px 12px;
      background: var(--bookmarkBase);
      color: white;
      width: 170px;
      transform: translateX(-165px);
      transition: transform 0.3s ease;
      font-family: pixles, monospace;
      font-size: 16px;
      text-decoration: none;
      box-shadow:
        0px var(--pixelWidth) var(--pixelHighlightColor),
        0px var(--pixelWidthAlt) var(--bookmarkBase),
        var(--pixelWidth) 0px var(--bookmarkBase),
        var(--pixelWidthAlt) 0px var(--bookmarkBase),
        0px calc(var(--pixelWidthAlt)*2) var(--pixelBorderColor),
        0px calc(var(--pixelWidth)*2) var(--pixelBorderColor),
        calc(var(--pixelWidth)*2) 0px var(--pixelBorderColor),
        calc(var(--pixelWidthAlt)*2) 0px var(--pixelBorderColor),
        calc(var(--pixelWidth)*3) 0px var(--pixelShadowColor),
        0px calc(var(--pixelWidth)*3) var(--pixelShadowColor);
    }
    .bookmark:hover { transform: translateX(0); }
    .bookmark span {
      margin-left: 10px;
      opacity: 0;
      transition: opacity 0.3s ease 0.1s;
    }
    .bookmark:hover span { opacity: 1; }

</style>
</head>
<body>
  <div id="loader-wrapper"><div class="loader"></div></div>
  <div id="loader-gif">
    <img src="../images/Loader.gif" alt="Loading..." style="width: 100vw; height: 100vh;" data-duration="1785" loading="eager" fetchpriority="high">
  </div>

  <div class="scroll-container">
    <section id = "page1" class="page page1">
      <div class="background" aria-hidden="true"></div>
      <a id="mlh-trust-badge" style="display:block;max-width:100px;min-width:60px;position:absolute;right:50px;top:0;width:10%;z-index:100" href="https://mlh.io/na?utm_source=na-hackathon&utm_medium=TrustBadge&utm_campaign=2026-season&utm_content=white" target="_blank"><img src="https://s3.amazonaws.com/logged-assets/trust-badge/2026/mlh-trust-badge-2026-white.svg" alt="Major League Hacking 2026 Hackathon Season" style="width:100%"></a>
      <img class="wave" id="wave1" src="../images/wave1.png" loading="lazy">
      <img class="wave" id="wave2" src="../images/wave2.gif" loading="lazy">
      <img class="wave" id="wave3" src="../images/wave3.gif" loading="lazy">
      <img class="wave" id="wave4" src="../images/wave4.gif" loading="lazy">
      <div id="title" role="banner">
        <div id="container">
          <img id="shadowImg" class="img-layer" src="../images/shadow.png" loading="eager" fetchpriority="high" importance="high">
          <img id="mainImg" class="img-layer" src="../images/title.png" loading="eager" fetchpriority="high" importance="high">
        </div>
      </div>
      <div class="buttons">
        <!-- Use an anchor so it opens the registration form in a new tab; preserve button styling and accessibility -->
        <a class="offset" href="https://forms.gle/LBRGVTyU59hJLcfJ7" target="_blank" rel="noopener noreferrer" role="button">Apply Now!</a>
      </div>
      <div class="deadline-label" aria-hidden="true">Early Application (11:59 PM EST) Friday, Nov 7th<br>Regular Application (11:59 PM EST) Saturday, Nov 15th<br>Early Decision Announced (8:00 AM EST) Monday, Nov 10th<br>Regular Decision Announced (8:00 AM EST) Monday, Nov 17th</div>
      <div class="bookmark-container">
        <a href="#page3" class="bookmark"><span>Tracks</span></a>
        <a href="#page4" class="bookmark"><span>Speakers</span></a>
        <a href="#page5" class="bookmark"><span>Schedule</span></a>
        <a href="#page6" class="bookmark"><span>FAQ</span></a>
        <a href="https://github.com/MLH/mlh-policies/blob/main/code-of-conduct.md" class="bookmark" target="_blank" rel="noopener noreferrer"><span>MLH Resources</span></a>
      </div>
    </section>

    <section id = "page2" class="page page2">
      <div id="about" role="banner" style="top:20%; left:50%; transform:translate(-50%,-25%); position:absolute; z-index:10; width:25vw; display:flex; justify-content:center; align-items:center; pointer-events:none;">
        <div id="about-container" style="position:relative; perspective:800px; justify-content:center; align-items:center; display:inline-block; max-width:90vw; width:60vw; min-width:220px;">
          <img id="aboutShadow" class="img-layer" src="../images/about shadow.png" loading="lazy" style="z-index:0;">
          <img id="aboutMain" class="img-layer" src="../images/about.png" loading="lazy" style="z-index:1; position:relative;">
        </div>
      </div>

      <p class="minecraft-text">
        The Wellesley Hackathon is an annual event that brings together students from more than 50 colleges and universities who are passionate about coding to spend an immersive weekend collaborating on projects!
      </p>

      <div class="beneath-images">
  <img class="beneath-img" id="beneath1" src="../images/Beneath1.gif" loading="lazy" style="z-index: 5;">
        <img class="beneath-img" id="beneath2" src="../images/Light.png" loading="lazy" 
        style="z-index: 4; width: 40vw; left: 10vw; top: 10vh; opacity: 0.3;">
        <img class="beneath-img" id="beneath3" src="../images/Beneath2.gif" loading="lazy" style="z-index: 3;">
        <img class="beneath-img" id="beneath4" src="../images/Beneath3.gif" loading="lazy" style="z-index: 2;">
        <img class="beneath-img" id="beneath5" src="../images/Light2.png" loading="lazy" 
        style="z-index: 2; width: 40vw; left: 70vw; top: 10vh; opacity: 0.4;">
        <img class="beneath-img" id="beneath6" src="../images/Light3.png" loading="lazy" 
        style="z-index: 1; width: 20vw; left: 50vw; top: 10vh; opacity: 0.3;">
        <img class="beneath-img" id="beneath7" src="../images/Beneath4.png" loading="lazy" style="z-index: 0;">
      </div>
    </section>

    <section id = "page3" class="page page3" style="background-color: #3d84e8;">
      <div style="position: relative; z-index: 1; width: 100%; height: 100%; display:flex; justify-content:center; align-items:center;">
        <div style="color: #fff; font-family: 'MinecraftRegular', monospace; font-size: 1em; text-align:center; max-width: 80%;">

          <!-- Interactive expanding panels (replace old buttons) -->
          <fieldset class="track-panels">
            <!-- Track 1 -->
            <label data-target="panel-track1">
              <input type="radio" name="tracks" value="Track 1" checked>
              <article>
                <div class="assets">
                  <img src="../images/wave3_layer2.png" alt="Background" />
                  <h3>Track1</h3>
                  <img src="../images/whale.png" style="left:77%; top:0%" />
                </div>
                <div class="content">
                  <p>Deep Dive</p>
                  <p>Technical Innovation</p>
                </div>
              </article>
            </label>

            <!-- Track 2 -->
            <label data-target="panel-track2">
              <input type="radio" name="tracks" value="Track 2">
              <article>
                <div class="assets">
                  <img src="../images/wave3_layer2.png" alt="Background" />
                  <h3>Track2</h3>
                  <img src="../images/fish.png" style="left:70%; top:10%" />
                </div>
                <div class="content">
                  <p>Make Waves</p>
                  <p>Social Impact</p>
                </div>
              </article>
            </label>
          </fieldset>

          <!-- Panels for each track -->
          <div class="page6-panel" id="panel-track1" role="dialog" aria-modal="false" aria-hidden="true">
            <div class="card">
              <strong>Deep Dive (Technical Innovation) </strong><br>
              Ambitious technical projects that explore cutting-edge technologies, complex algorithms, or innovative hardware solutions.
            </div>
          </div>

          <div class="page6-panel" id="panel-track2" role="dialog" aria-modal="false" aria-hidden="true">
            <div class="card">
              <strong>Make Waves (Social impact)</strong><br>
              Community-focused solutions that create positive ripple effects—from social impact apps to tools that bring people together.
            </div>
          </div>

        </div>
      </div>
    </section>

    <section id = "page4" class="page page4" style="background-color: #1b6ed3;">
      <div style="position: relative; z-index: 1; width: 100%; height: 100%; display:flex; justify-content:center; align-items:center;">
        <div style="color: #fff; font-family: 'MinecraftRegular', monospace; font-size: 1em; text-align:center; max-width: 80%;">
          <p>
            Coming up soon!
          </p>
        </div>
      </div>
      <!-- Speakers block: mirrors about/about shadow structure -->
      <div id="speakers" role="banner" style="top:20%; left:50%; transform:translate(-50%,-25%); position:absolute; z-index:12; width:25vw; display:flex; justify-content:center; align-items:center; pointer-events:none;">
        <div id="speakers-container" style="position:relative; perspective:800px; justify-content:center; align-items:center; display:inline-block; max-width:90vw; width:60vw; min-width:220px;">
          <img id="speakersShadow" class="img-layer" src="../images/speakers shadow.png" loading="lazy" style="z-index:5;">
          <img id="speakersMain" class="img-layer" src="../images/speakers.png" loading="lazy" style="z-index:6; position:relative;">
        </div>
      </div>
    </section>

    <section id = "page5" class="page page5" style="background-color: #1570bf;">
      <div style="position: absolute; top: 20%; left: 50%; transform: translateX(-50%); z-index: 1; width: 100%; height: auto; display: flex; justify-content: center; align-items: flex-start; pointer-events: none;">
        <div style="color: #fff; font-family: 'MinecraftRegular', monospace; font-size: 1em; text-align: center; max-width: 80%;">
          <p>(Rooms are TBD, and the schedule might change.)
          </p>
        </div>
      </div>
      <div style="position: absolute; top: 33%; left: 50%; transform: translateX(-50%); z-index: 1; width: 100%; height: auto; display: flex; justify-content: center; align-items: flex-start; pointer-events: none;">
        <div style="color: #fff; font-family: 'MinecraftRegular', monospace; font-size: 1em; text-align: left; max-width: 80%;">
          <p>
            Pre-WHACK<br>
            11/5 Wednesday Virtual Event 1: Info Session<br>
            Welcome to WHACK! This is an introduction to who we are, what we do, and why you should join. Note: There will be a Q&amp;A session at the end.<br><br>

            11/12 Thursday Virtual Event 2: Discord Game Night!<br>
            Come join other WHACK participants for some games! Meet new people and have fun!<br><br>

            11/21 Friday In-Person Event 3: Meet &amp; Greet!<br>
            Relax and idea prep, meet your (potential) teammates in-person! (Highly suggested for those who haven’t joined a team)
          </p>
        </div>
      </div>
      <div id="timeline" role="banner" style="top:13%; left:50%; transform:translate(-50%,-25%); position:absolute; z-index:10; width:20vw; display:flex; justify-content:center; align-items:center; pointer-events:none;">
          <div id="timeline-container" style="position:relative; perspective:800px; justify-content:center; align-items:center; display:inline-block; max-width:90vw; width:60vw; min-width:220px;">
            <img id="timelineShadow" class="img-layer" src="../images/timeline shadow.png" loading="lazy" style="z-index:0;">
              <img id="timelineMain" class="img-layer" src="../images/timeline.png" loading="lazy" style="z-index:1; position:relative;">
          </div>
      </div>
    </section>

    <section id = "page6" class="page page6" style="background-color: #1c6a96;">
      <div style="position: relative; z-index: 1; width: 100%; height: 100%; display:flex; justify-content:center; align-items:center;">
        <div style="color: #fff; font-family: 'MinecraftRegular', monospace; font-size: 1em; text-align:center; max-width: 80%;">
          <!-- Left-side vertical button list: left 25%, vertically centered -->
          <div class="page6-buttons" style="position: absolute; left: 25%; top: 50%; transform: translate(-50%, -50%); display: flex; flex-direction: column; gap: 1.2em; align-items: flex-start; z-index: 30;">
            <a data-panel="panel-what" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">What?</a>
            <a data-panel="panel-who" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">Who?</a>
            <a data-panel="panel-when" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">When?</a>
            <a data-panel="panel-where" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">Where?</a>
            <a data-panel="panel-why" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">Why?</a>
            <a data-panel="panel-team" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">Do I need a team to participate?</a>
            <a data-panel="panel-size" class="offset" role="button" href="#" style="height: 1em; font-size: 1.5em; line-height: 1em; padding: 1em 1.2em; display:inline-flex; align-items:center; justify-content:center; text-decoration:none;">How many team members can I have?</a>
          </div>
            <div class="page6-panel" id="panel-what"   role="dialog" aria-modal="false" aria-hidden="true"><div class="card">Wellesley Hackathon is a 24-hour hackathon where you can meet new people, and work to innovate and create a new project, product, or tool.</div></div>
            <div class="page6-panel" id="panel-who"    role="dialog" aria-modal="false" aria-hidden="true"><div class="card">Any undergraduate student at any college or university! Both first-timers and experienced hackers are welcome! We have something for everyone!</div></div>
            <div class="page6-panel" id="panel-when"   role="dialog" aria-modal="false" aria-hidden="true"><div class="card">Nov 22-23, 2025</div></div>
            <div class="page6-panel" id="panel-where"  role="dialog" aria-modal="false" aria-hidden="true"><div class="card">Wellesley College Campus, Lulu Chow Wang Campus Center, Tishman Commons (For students from other institutions, there will be signs to direct you to where you need to be!)</div></div>
            <div class="page6-panel" id="panel-why"    role="dialog" aria-modal="false" aria-hidden="true"><div class="card">Beyond the learning opportunities and mentorship workshops, WHACK is also a great place to meet other hackers from different backgrounds! Not to mention, we’ll also have awesome swag, prizes, and a few other surprises for our attendees!</div></div>
            <div class="page6-panel" id="panel-team"   role="dialog" aria-modal="false" aria-hidden="true"><div class="card">You are not required to have a team to register or participate, however, we highly encourage you to meet new people and connect with each other here at the hackathon!</div></div>
            <div class="page6-panel" id="panel-size"   role="dialog" aria-modal="false" aria-hidden="true"><div class="card">Teams may have up to 4 members.</div></div>

        </div>
      </div>
    </section>

    <section id = "page7" class="page page7">
      <div class="bottom-images">
    <img class="bottom-img" id="bottom5" src="../images/bottom5.png" loading="lazy" style="z-index: 0;">
    <img class="bottom-img" id="bottom4" src="../images/bottom4.png" loading="lazy" style="z-index: 1;">
    <img class="bottom-img" id="bottom3" src="../images/bottom3.png" loading="lazy" style="z-index: 2;">
    <img class="bottom-img" id="bottom2" src="../images/bottom2.gif" loading="lazy" style="z-index: 3;">
    <img class="bottom-img" id="bottom1" src="../images/bottom1.gif" loading="lazy" style="z-index: 4;">
      </div>
      <!-- Sponsors block: mirrors about/about shadow structure -->
      <div id="sponsors" role="banner" style="top:20%; left:50%; transform:translate(-50%,-25%); position:absolute; z-index:10; width:25vw; display:flex; justify-content:center; align-items:center; pointer-events:none;">
        <div id="sponsors-container" style="position:relative; perspective:800px; justify-content:center; align-items:center; display:inline-block; max-width:90vw; width:60vw; min-width:220px;">
          <img id="sponsorsShadow" class="img-layer" src="../images/sponsors shadow.png" loading="lazy" style="z-index:5;">
          <img id="sponsorsMain" class="img-layer" src="../images/sponsors.png" loading="lazy" style="z-index:6; position:relative;">
        </div>
      </div>
      <div style="position: relative; z-index: 1; width: 100%; height: 100%; display:flex; justify-content:center; align-items:center;">
        <div style="color: #fff; font-family: 'MinecraftRegular', monospace; font-size: 1em; text-align:center; max-width: 80%;">
          <p>
            Coming up soon! If you are interested in sponsoring Wellesley Hackathon, please reach out to us at <a href="mailto:sponsors@wellesleyhacks.org">sponsors@wellesleyhacks.org</a>.
          </p>
    </section>
  </div>
<script>
  (function(){
    'use strict';
    try {
      document.addEventListener('DOMContentLoaded', () => {
        // Cache DOM elements with defensive checks
        const bg = document.querySelector('.background');
        const waves = Array.from(document.querySelectorAll('.wave')) || [];
        const container = document.getElementById('container');
        const mainImg = document.getElementById('mainImg');
        const shadowImg = document.getElementById('shadowImg');
        const title = document.getElementById('title');
        const scrollContainer = document.querySelector('.scroll-container');
        const loaderGif = document.getElementById('loader-gif');
        const loaderGifImg = loaderGif && loaderGif.querySelector('img');
        const aboutContainer = document.getElementById('about-container');
        const aboutMain = document.getElementById('aboutMain');
        const aboutShadow = document.getElementById('aboutShadow');
        // Sponsors elements (mirror of about)
        const sponsorsContainer = document.getElementById('sponsors-container');
        const sponsorsMain = document.getElementById('sponsorsMain');
        const sponsorsShadow = document.getElementById('sponsorsShadow');
        // Speakers elements (mirror of sponsors/about)
        const speakersContainer = document.getElementById('speakers-container');
        const speakersMain = document.getElementById('speakersMain');
        const speakersShadow = document.getElementById('speakersShadow');
        // Timeline elements (mirror of sponsors)
        const timelineContainer = document.getElementById('timeline-container');
        const timelineMain = document.getElementById('timelineMain');
        const timelineShadow = document.getElementById('timelineShadow');
        

        if (!scrollContainer) return; // nothing to do if core container missing

        // Cache styles for performance (guarded)
        const bgStyle = bg ? bg.style : { setProperty: () => {} };
        const mainImgStyle = mainImg ? mainImg.style : { transform: '' };
        const shadowImgStyle = shadowImg ? shadowImg.style : { transform: '' };
        const titleStyle = title ? title.style : { opacity: 1, transform: '' };
        const loaderGifStyle = loaderGif ? loaderGif.style : null;

        // Movement and animation variables
        const moveFactors = [0.0005, 0.005, 0.01, 0.05, 0.1, 0.15, 0.2];
        let centerX = window.innerWidth * 0.5;
        let centerY = window.innerHeight * 0.5;
        // cached viewport halves to avoid repeated division per-frame
        let halfWindowWidth = window.innerWidth * 0.5;
        let halfWindowHeight = window.innerHeight * 0.5;
        let box = null;
        let aboutbox = null;
        let sponsorsbox = null;
        let speakersbox = null;
        let timelinebox = null;
        let lastX = centerX, lastY = centerY;
        let isAnimating = true;

        // Cache bottom and beneath images with their styles
        const bottomImgs = [];
        const beneathImgs = [];
        for (let i = 1; i <= 5; i++) {
          const img = document.getElementById(`bottom${i}`);
          if (img) bottomImgs.push({el: img, style: img.style});
        }
        for (let i = 1; i <= 7; i++) {
          const img = document.getElementById(`beneath${i}`);
          if (img) beneathImgs.push({el: img, style: img.style});
        }
        // Cache wave style objects to reduce lookup cost per-frame
        const waveStyles = new Array(waves.length);
        for (let i = 0; i < waves.length; i++) {
          waveStyles[i] = waves[i] && waves[i].style;
        }

        function updateBox() { 
          if (container && container.getBoundingClientRect) box = container.getBoundingClientRect(); 
        }

        function updateAboutBox() {
          if (aboutContainer && aboutContainer.getBoundingClientRect) aboutbox = aboutContainer.getBoundingClientRect();
        }

        function updateSponsorsBox() {
          if (sponsorsContainer && sponsorsContainer.getBoundingClientRect) sponsorsbox = sponsorsContainer.getBoundingClientRect();
        }

        function updateSpeakersBox() {
          if (speakersContainer && speakersContainer.getBoundingClientRect) speakersbox = speakersContainer.getBoundingClientRect();
        }

        function updateTimelineBox() {
          if (timelineContainer && timelineContainer.getBoundingClientRect) timelinebox = timelineContainer.getBoundingClientRect();
        }

        if (aboutMain && aboutMain.addEventListener) aboutMain.addEventListener('load', updateAboutBox);
        if (sponsorsMain && sponsorsMain.addEventListener) sponsorsMain.addEventListener('load', updateSponsorsBox);
        if (speakersMain && speakersMain.addEventListener) speakersMain.addEventListener('load', updateSpeakersBox);
        if (timelineMain && timelineMain.addEventListener) timelineMain.addEventListener('load', updateTimelineBox);
        window.addEventListener('resize', () => setTimeout(() => { updateAboutBox(); updateSponsorsBox(); updateSpeakersBox(); updateTimelineBox(); }, 16));
        if (mainImg && mainImg.addEventListener) mainImg.addEventListener('load', updateBox);
        // Consolidated resize handler: update cached sizes and boxes
        let resizeTimeout;
        function handleResize() {
          clearTimeout(resizeTimeout);
          resizeTimeout = setTimeout(() => {
            updateBox();
            centerX = window.innerWidth * 0.5;
            centerY = window.innerHeight * 0.5;
            halfWindowWidth = window.innerWidth * 0.5;
            halfWindowHeight = window.innerHeight * 0.5;
            updateAboutBox();
            updateSponsorsBox();
            updateSpeakersBox();
            updateTimelineBox();
          }, 32);
        }
        window.addEventListener('resize', handleResize, {passive: true});

        // Throttled pointer movement for parallax effects
        let pointerMoveQueued = false;
        let lastPointerEventX = null;
        let lastPointerEventY = null;
        function onPointerMove(e) {
          if (!e) return;
          if (e.clientX === lastPointerEventX && e.clientY === lastPointerEventY) return;
          lastPointerEventX = e.clientX;
          lastPointerEventY = e.clientY;
          if (pointerMoveQueued) return;
          pointerMoveQueued = true;
          requestAnimationFrame(() => {
            lastX = lastPointerEventX;
            lastY = lastPointerEventY;
            pointerMoveQueued = false;
          });
        }

        window.addEventListener('pointermove', onPointerMove, {passive: true});

        // Animation loop with FPS cap
        const TARGET_FPS = 30;
        const FRAME_INTERVAL = 1000 / TARGET_FPS;
        let lastFrameTime = performance.now();

        function animate(now) {
          if (!isAnimating) return;
          if (!now) now = performance.now();
          const elapsed = now - lastFrameTime;
          if (elapsed < FRAME_INTERVAL) {
            requestAnimationFrame(animate);
            return;
          }
          lastFrameTime = now - (elapsed % FRAME_INTERVAL);

          if (box) {
            try {
              const offsetX = lastX - centerX;
              const offsetY = lastY - centerY;
              if (bgStyle && bgStyle.backgroundPosition !== undefined) bgStyle.backgroundPosition = `${-offsetX * moveFactors[0]}px ${-offsetY * moveFactors[0]}px`;

              // waves
              for (let i = 0, wl = waves.length; i < wl; i++) {
                const ws = waveStyles[i];
                const factor = moveFactors[i] + 0.05;
                const tx = offsetX * factor;
                const ty = offsetY * factor;
                if (ws) ws.transform = `translate3d(${tx}px, ${ty}px, 0)`;
              }

              for (let i = 0, bl = bottomImgs.length; i < bl; i++) {
                const imgObj = bottomImgs[i];
                const factor = moveFactors[moveFactors.length - 1 - i] || 0.05;
                const tx = offsetX * factor * 0.75;
                const ty = offsetY * factor * 0.75;
                if (imgObj.style) imgObj.style.transform = `translate3d(${tx}px, ${ty}px, 0)`;
              }

              for (let i = 0, bl2 = beneathImgs.length; i < bl2; i++) {
                const imgObj = beneathImgs[i];
                const factor = moveFactors[moveFactors.length - 1 - i] || 0.02;
                const tx = offsetX * factor * 1.1;
                const ty = offsetY * factor * 1.1;
                if (imgObj.style) imgObj.style.transform = `translate3d(${tx}px, ${ty}px, 0)`;
              }

              const centerBx = box.left + box.width * 0.5;
              const centerBy = box.top + box.height * 0.5;
              const dx = lastX - centerBx;
              const dy = lastY - centerBy;
              const percentX = dx / (box.width * 0.5);
              const percentY = dy / (box.height * 0.5);
              const rotateX = (-percentY * 15);
              const rotateY = (percentX * 15);
              const scale = 1 + ((Math.abs(percentX) + Math.abs(percentY)) * 0.5) * 0.1;
              if (mainImgStyle) mainImgStyle.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(${scale}, ${scale}, 1)`;

              const shadowScale = scale * 1.07;
              const offsetX2 = percentX * 10;
              const offsetY2 = percentY * 10;
              if (shadowImgStyle) shadowImgStyle.transform = `translate3d(${offsetX2}px, ${offsetY2}px, 0) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(${shadowScale}, ${shadowScale}, 1)`;

              if (aboutbox) {
                const vdx = lastX - centerX;
                const vdy = lastY - centerY;
                const halfW = halfWindowWidth || 1;
                const halfH = halfWindowHeight || 1;
                let apercentX = vdx / halfW;
                let apercentY = vdy / halfH;
                apercentX = Math.max(-1, Math.min(1, apercentX));
                apercentY = Math.max(-1, Math.min(1, apercentY));
                const strength = 0.6;
                const arotateX = (-apercentY * 15 * strength);
                const arotateY = (apercentX * 15 * strength);
                const ascale = 1 + ((Math.abs(apercentX) + Math.abs(apercentY)) * 0.5) * 0.05;
                if (aboutMain && aboutMain.style) aboutMain.style.transform = `rotateX(${arotateX}deg) rotateY(${arotateY}deg) scale3d(${ascale}, ${ascale}, 1)`;
                if (aboutShadow && aboutShadow.style) aboutShadow.style.transform = `translate3d(${apercentX * 8}px, ${apercentY * 8}px, 0) rotateX(${arotateX}deg) rotateY(${arotateY}deg) scale3d(${ascale * 1.07}, ${ascale * 1.07}, 1)`;
              }

              // Sponsors: apply same tilt/parallax behavior if present
              if (sponsorsbox) {
                const sdx = lastX - centerX;
                const sdy = lastY - centerY;
                const shalfW = halfWindowWidth || 1;
                const shalfH = halfWindowHeight || 1;
                let spercentX = sdx / shalfW;
                let spercentY = sdy / shalfH;
                spercentX = Math.max(-1, Math.min(1, spercentX));
                spercentY = Math.max(-1, Math.min(1, spercentY));
                const sstrength = 0.6;
                const srotateX = (-spercentY * 15 * sstrength);
                const srotateY = (spercentX * 15 * sstrength);
                const sscale = 1 + ((Math.abs(spercentX) + Math.abs(spercentY)) * 0.5) * 0.05;
                if (sponsorsMain && sponsorsMain.style) sponsorsMain.style.transform = `rotateX(${srotateX}deg) rotateY(${srotateY}deg) scale3d(${sscale}, ${sscale}, 1)`;
                if (sponsorsShadow && sponsorsShadow.style) sponsorsShadow.style.transform = `translate3d(${spercentX * 8}px, ${spercentY * 8}px, 0) rotateX(${srotateX}deg) rotateY(${srotateY}deg) scale3d(${sscale * 1.07}, ${sscale * 1.07}, 1)`;
              }
                // Speakers: apply same tilt/parallax behavior if present
                if (speakersbox) {
                  const spdx = lastX - centerX;
                  const spdy = lastY - centerY;
                  const sphalfW = halfWindowWidth || 1;
                  const sphalfH = halfWindowHeight || 1;
                  let spercentX2 = spdx / sphalfW;
                  let spercentY2 = spdy / sphalfH;
                  spercentX2 = Math.max(-1, Math.min(1, spercentX2));
                  spercentY2 = Math.max(-1, Math.min(1, spercentY2));
                  const sstrength2 = 0.6;
                  const srotateX2 = (-spercentY2 * 15 * sstrength2);
                  const srotateY2 = (spercentX2 * 15 * sstrength2);
                  const sscale2 = 1 + ((Math.abs(spercentX2) + Math.abs(spercentY2)) * 0.5) * 0.05;
                  if (speakersMain && speakersMain.style) speakersMain.style.transform = `rotateX(${srotateX2}deg) rotateY(${srotateY2}deg) scale3d(${sscale2}, ${sscale2}, 1)`;
                  if (speakersShadow && speakersShadow.style) speakersShadow.style.transform = `translate3d(${spercentX2 * 8}px, ${spercentY2 * 8}px, 0) rotateX(${srotateX2}deg) rotateY(${srotateY2}deg) scale3d(${sscale2 * 1.07}, ${sscale2 * 1.07}, 1)`;
                }
              // Timeline: apply same tilt/parallax behavior if present
              if (timelinebox) {
                const tdx = lastX - centerX;
                const tdy = lastY - centerY;
                const thalfW = halfWindowWidth || 1;
                const thalfH = halfWindowHeight || 1;
                let tpercentX = tdx / thalfW;
                let tpercentY = tdy / thalfH;
                tpercentX = Math.max(-1, Math.min(1, tpercentX));
                tpercentY = Math.max(-1, Math.min(1, tpercentY));
                const tstrength = 0.6;
                const trotateX = (-tpercentY * 15 * tstrength);
                const trotateY = (tpercentX * 15 * tstrength);
                const tscale = 1 + ((Math.abs(tpercentX) + Math.abs(tpercentY)) * 0.5) * 0.05;
                if (timelineMain && timelineMain.style) timelineMain.style.transform = `rotateX(${trotateX}deg) rotateY(${trotateY}deg) scale3d(${tscale}, ${tscale}, 1)`;
                if (timelineShadow && timelineShadow.style) timelineShadow.style.transform = `translate3d(${tpercentX * 8}px, ${tpercentY * 8}px, 0) rotateX(${trotateX}deg) rotateY(${trotateY}deg) scale3d(${tscale * 1.07}, ${tscale * 1.07}, 1)`;
              }
            } catch (innerErr) {
              // swallow individual frame errors to avoid killing the loop
              console.error('frame error', innerErr);
            }
          }
          requestAnimationFrame(animate);
        }

        requestAnimationFrame(animate);

        // Reset on blur
        window.addEventListener('blur', () => {
          if (mainImgStyle) mainImgStyle.transform = '';
          if (shadowImgStyle) shadowImgStyle.transform = '';
        });

        // Loader GIF management
        const loaderGifDuration = parseInt(loaderGifImg && loaderGifImg.dataset && loaderGifImg.dataset.duration) || 1100;
        let currentGifSrc = '';

        function showLoaderGif() {
          if (!loaderGif || !loaderGifImg || !loaderGifStyle) return;
          if (loaderGifStyle.opacity !== '1') {
            if (!currentGifSrc) currentGifSrc = loaderGifImg.src;
            // refresh GIF
            try { loaderGifImg.src = currentGifSrc + '?t=' + Date.now(); } catch(e){}
            loaderGifStyle.opacity = '1';
            loaderGifStyle.pointerEvents = 'auto';
          }
        }

        function hideLoaderGif() {
          if (loaderGifStyle && loaderGifStyle.opacity !== '0') {
            loaderGifStyle.opacity = '0';
            loaderGifStyle.pointerEvents = 'none';
          }
        }

        // Improved wheel/touchpad handling: one page per gesture
        // --- Shared page flip routine used by wheel + bookmarks ---
        function flipToPage(targetPage) {
          if (!scrollContainer) return;
          const pageCount = document.querySelectorAll('.page').length;
          targetPage = Math.max(0, Math.min(pageCount - 1, targetPage));

          // mirror the same timing/animation used in the wheel pager
          const waitForGif = (ms) => new Promise(res => setTimeout(res, ms));
          const maxGifWait = 950;
          const fraction = 0.4;
          const gifWait = Math.min(Math.round((loaderGifDuration || 1200) * fraction), maxGifWait);

          showLoaderGif();
          (async () => {
            await waitForGif(gifWait);
            try {
              scrollContainer.scrollTo({
                top: targetPage * window.innerHeight,
                behavior: 'smooth'
              });
            } catch (e) {
              scrollContainer.scrollTop = targetPage * window.innerHeight;
            }
            setTimeout(() => { hideLoaderGif(); }, Math.min(loaderGifDuration, 600));
          })();
        }

        // Return page index for any element inside a .page
        function pageIndexFor(el) {
          const pages = Array.from(document.querySelectorAll('.page'));
          const pageEl = el && el.closest('.page');
          return pages.indexOf(pageEl);
        }

        // --- Wheel/touchpad handling: one page per gesture, now using flipToPage ---
        (function installWheelPager(){
          const pages = document.querySelectorAll('.page');
          const pageCount = pages.length;
          const scrollLockDuration = 700;
          let isDelayingScroll = false;

          scrollContainer.addEventListener('wheel', (e) => {
            if (!e) return;
            e.preventDefault();
            if (!e.deltaY) return;
            if (isDelayingScroll) return;

            const direction = e.deltaY > 0 ? 1 : -1;
            const currentPage = Math.round(scrollContainer.scrollTop / window.innerHeight || 0);
            let targetPage = currentPage + direction;
            if (targetPage < 0) targetPage = 0;
            if (targetPage > pageCount - 1) targetPage = pageCount - 1;
            if (targetPage === currentPage) return;

            isDelayingScroll = true;
            flipToPage(targetPage);
            setTimeout(() => { isDelayingScroll = false; }, scrollLockDuration);
          }, { passive: false });
        })();

        // --- Bookmark handling: clicks on in-page anchors and hash changes ---
        function handleHashJump(hash) {
          if (!hash || hash === '#') return;
          const target = document.querySelector(hash);
          if (!target) return;
          const idx = pageIndexFor(target);
          if (idx >= 0) {
            // Use the same flip animation as the wheel pager
            flipToPage(idx);
          } else {
            // Fallback: smooth scroll to element if it isn't a full page
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }

        // Intercept clicks on anchors like <a href="#page4">
        document.addEventListener('click', (e) => {
          const a = e.target.closest('a[href^="#"]');
          if (!a) return;
          const href = a.getAttribute('href');
          if (!href || href.length < 2) return; // "#" only
          const target = document.querySelector(href);
          if (!target) return;

          e.preventDefault();
          // Update URL hash for deep linkability, then flip via hashchange handler
          if (history.pushState) {
            history.pushState(null, '', href);
            handleHashJump(href);
          } else {
            // Fallback updates the hash; hashchange handler will catch it
            location.hash = href;
          }
        }, { capture: true });

        // Respond to manual hash changes (back/forward, programmatic changes)
        window.addEventListener('hashchange', () => handleHashJump(location.hash));

        // If the page loads with a hash, honor it with the flip animation
        if (location.hash) {
          // small defer to ensure layout is ready
          setTimeout(() => handleHashJump(location.hash), 0);
        }

        // Optimized scroll position tracking
        let scrollTicking = false;
        const vh = window.innerHeight;
        function onScroll() {
          if (scrollTicking) return;
          scrollTicking = true;
          requestAnimationFrame(() => {
            const scrollY = scrollContainer.scrollTop;
            if (scrollY < vh) {
              if (titleStyle) { titleStyle.opacity = '1'; titleStyle.transform = 'translate(-50%, -50%)'; }
            } else if (scrollY < vh * 2) {
              const progress = (scrollY - vh) / vh;
              if (titleStyle) { titleStyle.opacity = 1 - 0.5 * progress; titleStyle.transform = 'translate(-50%, -50%)'; }
            } else {
              if (titleStyle) { titleStyle.opacity = '0.5'; titleStyle.transform = 'translate(-50%, -100vh)'; }
            }
            scrollTicking = false;
          });
        }
        scrollContainer.addEventListener('scroll', onScroll, {passive: true});
        onScroll();
        updateBox();
        updateAboutBox();
        updateSponsorsBox();
        updateSpeakersBox();
        updateTimelineBox();
      });

      // Optimized window load handler
      window.addEventListener('load', () => {
        try {
          const loader = document.getElementById('loader-wrapper');
          const loaderGif = document.getElementById('loader-gif');
          if (!loader) {
            document.body.classList.remove('loading-bg');
            return;
          }
          const showGifTimer = setTimeout(() => {
            if (loaderGif) { loaderGif.style.opacity = '1'; loaderGif.style.pointerEvents = 'auto'; }
          }, 500);
          const hideLoaderTimer = setTimeout(() => {
            loader.style.opacity = '0';
            const removeLoaderTimer = setTimeout(() => {
              try { loader.remove(); } catch(e){}
              const finalCleanupTimer = setTimeout(() => {
                if (loaderGif) { loaderGif.style.opacity = '0'; loaderGif.style.pointerEvents = 'none'; }
                document.body.classList.remove('loading-bg');
              }, 120);
            }, 500);
          }, 1000);
        } catch(e) { console.error('load handler', e); }
      });
    } catch (err) {
      console.error('initialization error', err);
    }
  })();
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  function initPanels(sectionSelector) {
    const section = document.querySelector(sectionSelector);
    if (!section) return;

    const btns = Array.from(section.querySelectorAll('.page6-buttons [data-panel]'));
    const panels = new Map();
    section.querySelectorAll('.page6-panel[id]').forEach(p => panels.set(p.id, p));

    let openId = null;

    function showPanel(id, btn) {
      if (openId && panels.get(openId)) {
        hidePanel(openId);
        if (openId === id) return;
      }
      const panel = panels.get(id);
      if (!panel) return;
      panel.classList.add('show');
      panel.setAttribute('aria-hidden', 'false');
      if (btn) btn.setAttribute('aria-expanded', 'true');
      openId = id;
    }

    function hidePanel(id) {
      const panel = panels.get(id);
      if (!panel) return;
      panel.classList.remove('show');
      panel.setAttribute('aria-hidden', 'true');
      btns.forEach(b => {
        if (b.getAttribute('data-panel') === id) b.setAttribute('aria-expanded', 'false');
      });
      if (openId === id) openId = null;
    }

    btns.forEach(btn => {
      if (!btn.hasAttribute('aria-expanded')) btn.setAttribute('aria-expanded', 'false');
      if (!btn.hasAttribute('role')) btn.setAttribute('role', 'button');
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const id = btn.getAttribute('data-panel');
        if (!id) return;
        if (openId === id) hidePanel(id);
        else showPanel(id, btn);
      });
      btn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
      btn.tabIndex = 0;
    });

    section.addEventListener('pointerdown', (e) => {
      if (!openId) return;
      const panel = panels.get(openId);
      if (panel && !panel.contains(e.target) && !btns.includes(e.target)) {
        hidePanel(openId);
      }
    });
  }

  initPanels('.page3');
  initPanels('.page6');

  const scrollContainer = document.querySelector('.scroll-container');
  if (scrollContainer) {
    let lastPage = 0;
    scrollContainer.addEventListener('scroll', () => {
      const current = Math.round(scrollContainer.scrollTop / window.innerHeight || 0);
      if (current !== lastPage) {
        document.querySelectorAll('.page6-panel.show').forEach(p => {
          p.classList.remove('show');
          p.setAttribute('aria-hidden', 'true');
        });
        document.querySelectorAll('.page6-buttons [data-panel][aria-expanded="true"]').forEach(b => {
          b.setAttribute('aria-expanded', 'false');
        });
        lastPage = current;
      }
    }, { passive: true });
  }
});
</script>
<script type="module">
    import gsap from 'https://cdn.skypack.dev/gsap@3.12.0';
    const UPDATE = ({ x, y }) => {
      gsap.set(document.documentElement, {
        '--x': gsap.utils.mapRange(0, window.innerWidth, -1, 1, x),
        '--y': gsap.utils.mapRange(0, window.innerHeight, -1, 1, y),
      });
    };
    window.addEventListener('mousemove', UPDATE);

    const handleOrientation = ({ beta, gamma }) => {
      const isLandscape = window.matchMedia('(orientation: landscape)').matches;
      gsap.set(document.documentElement, {
        '--x': gsap.utils.clamp(-1, 1, isLandscape
          ? gsap.utils.mapRange(-45, 45, -1, 1, beta)
          : gsap.utils.mapRange(-45, 45, -1, 1, gamma)),
        '--y': gsap.utils.clamp(-1, 1, isLandscape
          ? gsap.utils.mapRange(20, 70, 1, -1, Math.abs(gamma))
          : gsap.utils.mapRange(20, 70, 1, -1, beta)),
      });
    };
    const START = () => {
      if (DeviceOrientationEvent?.requestPermission) {
        DeviceOrientationEvent.requestPermission().then(result => {
          if (result === 'granted') {
            window.addEventListener('deviceorientation', handleOrientation);
          }
        });
      } else {
        window.addEventListener('deviceorientation', handleOrientation);
      }
    };
    document.body.addEventListener('click', START, { once: true });
  </script>

  <!-- ---------- Connect panels to right-side text boxes ---------- -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const labels = document.querySelectorAll('.track-panels label');
      labels.forEach(label => {
        label.addEventListener('click', () => {
          const id = label.dataset.target;
          document.querySelectorAll('.page6-panel').forEach(p => {
            if (p.id === id) {
              p.classList.add('show');
              p.setAttribute('aria-hidden', 'false');
            } else {
              p.classList.remove('show');
              p.setAttribute('aria-hidden', 'true');
            }
          });
        });
      });
    });
  </script>
</body>
</html>